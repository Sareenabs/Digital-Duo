<!DOCTYPE html>
<html>
<head>
    <title>Customer - Trustora</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            text-align: center;
            background: rgb(71, 27, 71);
            color: white;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .container {
            margin-top: 50px;
            position: relative;
            z-index: 1;
        }

        h1 {
            font-family: 'Playfair Display', serif;
            font-size: 50px;
            letter-spacing: 2px;
            color: #e1bee7;
        }

        h2 {
            font-family: 'Playfair Display', serif;
            font-size: 28px;
            color: #ce93d8;
            margin-top: 30px;
        }

        .description {
            width: 70%;
            margin: 20px auto;
            font-size: 17px;
            line-height: 1.6;
            color: rgba(255,255,255,0.85);
        }

        input {
            width: 250px;
            padding: 12px;
            margin: 10px 0;
            border-radius: 50px;
            border: none;
            font-size: 16px;
        }

        button {
            padding: 12px 20px;
            border: none;
            border-radius: 50px;
            background: linear-gradient(135deg, #ce93d8, #8e24aa);
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: 0.3s;
        }

        button:hover {
            transform: translateY(-4px);
            background: linear-gradient(135deg, #ba68c8, #7b1fa2);
        }

        /* Result Card Style - Trustora look */
        .result-card {
            background: rgba(255,255,255,0.08);
            margin: 15px auto;
            padding: 20px;
            width: 400px;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            display: flex;
            justify-content: space-between;
            align-items: center;
            text-align: left;
            transition: 0.3s;
        }

        .result-card:hover {
            transform: translateY(-8px);
        }

        .card-details h3 {
            margin: 0 0 5px 0;
            color: #e1bee7;
        }

        .card-details p {
            margin: 2px 0;
            font-size: 15px;
            color: rgba(255,255,255,0.8);
        }

        .product-image {
            width: 80px;
            height: 80px;
            border-radius: 15px;
            object-fit: cover;
            border: 1px solid rgba(255,255,255,0.3);
            margin-left: 15px;
        }

        /* Glow circles background */
        .glow1, .glow2 {
            position: absolute;
            width: 400px;
            height: 400px;
            border-radius: 50%;
            filter: blur(150px);
            opacity: 0.4;
            z-index: 0;
        }

        .glow1 {
            background: #9c27b0;
            top: -100px;
            left: -100px;
        }

        .glow2 {
            background: #ba68c8;
            bottom: -120px;
            right: -120px;
        }

        @media(max-width:768px){
            h1 { font-size: 40px; }
            h2 { font-size: 24px; }
            .result-card { width: 90%; flex-direction: column; align-items: flex-start; }
            .product-image { margin-left: 0; margin-top: 10px; }
        }

    </style>
</head>
<body>

<div class="glow1"></div>
<div class="glow2"></div>

<div class="container">
    <h1>TRUSTORA</h1>

    <p class="description">
        Discover unique handmade products near you and support local women entrepreneurs üíú
    </p>

    <h2>ORDER NOW</h2>

    <input type="text" id="search-product" placeholder="Search Product"><br>
    <button onclick="searchProduct()">Search</button>

    <div id="results"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import { getDatabase, ref, get, child } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-database.js";

const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "trustora-9099e.firebaseapp.com",
    databaseURL: "https://trustora-9099e-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "trustora-9099e",
    storageBucket: "trustora-9099e.appspot.com",
    messagingSenderId: "788405282739",
    appId: "1:788405282739:web:da3d6685e50c3444448dc6"
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);

window.searchProduct = async function() {
    const productSearch = document.getElementById("search-product").value.trim().toLowerCase();
    const resultsDiv = document.getElementById("results");
    resultsDiv.innerHTML = "Loading products... ‚è≥";

    try {
        const dbRef = ref(db);
        const snapshot = await get(child(dbRef, "products"));

        if (!snapshot.exists()) {
            resultsDiv.innerHTML = "<p>No products found üòî</p>";
            return;
        }

        let products = Object.values(snapshot.val());
        products = products.filter(p => p.productName?.toLowerCase().includes(productSearch));

        if (products.length === 0) {
            resultsDiv.innerHTML = "<p>No products found üòî</p>";
            return;
        }

        let resultHTML = "";
        products.forEach(p => {
            const imageSrc = p.photoURL || "";
            resultHTML += `
                <div class="result-card">
                    <div class="card-details">
                        <h3>${p.productName}</h3>
                        <p><strong>Seller:</strong> ${p.sellerName || "N/A"}</p>
                        <p><strong>Location:</strong> ${p.location || "N/A"}</p>
                        <p><strong>Phone:</strong> ${p.phone || "Not Available"}</p>
                    </div>
                    <img src="${imageSrc ? imageSrc : 'https://via.placeholder.com/80'}" alt="Product Image" class="product-image">
                </div>
            `;
        });

        resultsDiv.innerHTML = resultHTML;

    } catch(err) {
        console.error(err);
        resultsDiv.innerHTML = "<p>Error loading products üò¢</p>";
    }
};
</script>

</body>
</html>
